<html>
  <head>
  	<title>Ceres</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<link href="https://fonts.googleapis.com/css?family=Courgette&display=swap" rel="stylesheet">

	<link href="css/styles.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    
	let xhr = new XMLHttpRequest();
    xhr.open("GET", "mapServlet", false);
    xhr.send();
    let results = JSON.parse(xhr.responseText);
    console.log(results);
   	  var myMapsApiKey = 'AIzaSyClkaCWbp6hVLfO_RKqo4FyNnOB0gejSog';
      google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': myMapsApiKey
      });
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
    	let array = [
            ['State', 'Env. Index', 'Samples'],
            ['Kentucky', 200, 3],
            ['Washington', 300, 5],
            ['Oregon', 400, 4],
            ['Canada', 500, 10],
            ['New York', 600, 7],
            ['California', 700, 15]
          ];
        for(i=0; i<results.length; i++) {
        	array.push(results[i]);
        }
        var data = google.visualization.arrayToDataTable(array);

        var options = {
        		region: "US",
        		resolution: "provinces"
        };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
  		<nav class="navbar navbar-light navbar-expand-md">
		  <a class="navbar-brand" href="#">CERES</a>
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar1">
		    <span class="navbar-toggler-icon"></span>
		  </button>
		  <div class="collapse navbar-collapse" id="navbar1">
		    <ul class="navbar-nav mr-auto">
		      <li class="nav-item">
		        <a class="nav-link" href="home.jsp">Home</a>
		      </li>
		      <li class="nav-item active">
		        <a class="nav-link" href="map.html">Map</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="quiz.jsp">Quiz</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="aboutus.html">Our Story</a>
		      </li>
		    </ul>
		  </div>
		</nav>
    <div id="regions_div" style="width: auto; height: 100%"></div>
  </body>
</html>